{"ast":null,"code":"var _jsxFileName = \"/Users/relationskatie/study_golang/Hackathon2GIS/frontend/src/Map2GIS.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from \"react\";\nimport { load } from \"@2gis/mapgl\";\n\n/**\n * Простой компонент с 2GIS MapGL и одной меткой.\n * - Создаёт карту и метку в центре Москвы\n * - Навешивает click на метку\n * - Корректно чистит ресурсы (marker.destroy, map.destroy)\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function MapWithMarker() {\n  _s();\n  const mapContainerRef = useRef < HTMLDivElement | null > null;\n  const mapRef = useRef < any > null;\n  const markerRef = useRef < any > null;\n  useEffect(() => {\n    let isMounted = true;\n    (async () => {\n      try {\n        const mapgl = await load();\n        if (!isMounted || !mapContainerRef.current) return;\n\n        // 1) Инициализируем карту\n        mapRef.current = new mapgl.Map(mapContainerRef.current, {\n          center: [37.618423, 55.751244],\n          // [lon, lat]\n          zoom: 13,\n          // ⚠️ Продолжайте использовать ваш ключ, лучше хранить в .env\n          key: \"8f104049-075f-4c47-817b-b8b450854d86\"\n        });\n\n        // 2) Добавляем метку\n        markerRef.current = new mapgl.Marker(mapRef.current, {\n          coordinates: [37.618423, 55.751244]\n          // Можно указать свою иконку (SVG/PNG). Размеры и якорь настраиваются опциями ниже\n          // icon: \"/pin.svg\",\n          // size: [32, 40],\n          // anchor: [16, 40],\n        });\n\n        // 3) Обработчик клика по метке\n        markerRef.current.on(\"click\", () => {\n          // Пример реакции: плавно приблизиться к точке\n          if (!mapRef.current) return;\n          mapRef.current.setZoom(15, {\n            animate: true\n          });\n          mapRef.current.setCenter([37.618423, 55.751244], {\n            animate: true\n          });\n        });\n      } catch (e) {\n        // На случай, если load() не прошёл (например, сеть/ключ)\n        console.error(\"MapGL init error:\", e);\n      }\n    })();\n    return () => {\n      isMounted = false;\n      try {\n        if (markerRef.current) {\n          markerRef.current.destroy();\n          markerRef.current = null;\n        }\n        if (mapRef.current) {\n          mapRef.current.destroy();\n          mapRef.current = null;\n        }\n      } catch (e) {\n        console.warn(\"Cleanup error:\", e);\n      }\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: mapContainerRef,\n    style: {\n      width: \"100%\",\n      height: 500,\n      borderRadius: 12,\n      overflow: \"hidden\"\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n}\n_s(MapWithMarker, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = MapWithMarker;\nvar _c;\n$RefreshReg$(_c, \"MapWithMarker\");","map":{"version":3,"names":["React","useEffect","useRef","load","jsxDEV","_jsxDEV","MapWithMarker","_s","mapContainerRef","HTMLDivElement","mapRef","any","markerRef","isMounted","mapgl","current","Map","center","zoom","key","Marker","coordinates","on","setZoom","animate","setCenter","e","console","error","destroy","warn","ref","style","width","height","borderRadius","overflow","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/relationskatie/study_golang/Hackathon2GIS/frontend/src/Map2GIS.js"],"sourcesContent":["import React, { useEffect, useRef } from \"react\";\nimport { load } from \"@2gis/mapgl\";\n\n/**\n * Простой компонент с 2GIS MapGL и одной меткой.\n * - Создаёт карту и метку в центре Москвы\n * - Навешивает click на метку\n * - Корректно чистит ресурсы (marker.destroy, map.destroy)\n */\nexport default function MapWithMarker() {\n  const mapContainerRef = useRef<HTMLDivElement | null>(null);\n  const mapRef = useRef<any>(null);\n  const markerRef = useRef<any>(null);\n\n  useEffect(() => {\n    let isMounted = true;\n\n    (async () => {\n      try {\n        const mapgl = await load();\n        if (!isMounted || !mapContainerRef.current) return;\n\n        // 1) Инициализируем карту\n        mapRef.current = new mapgl.Map(mapContainerRef.current, {\n          center: [37.618423, 55.751244], // [lon, lat]\n          zoom: 13,\n          // ⚠️ Продолжайте использовать ваш ключ, лучше хранить в .env\n          key: \"8f104049-075f-4c47-817b-b8b450854d86\",\n        });\n\n        // 2) Добавляем метку\n        markerRef.current = new mapgl.Marker(mapRef.current, {\n          coordinates: [37.618423, 55.751244],\n          // Можно указать свою иконку (SVG/PNG). Размеры и якорь настраиваются опциями ниже\n          // icon: \"/pin.svg\",\n          // size: [32, 40],\n          // anchor: [16, 40],\n        });\n\n        // 3) Обработчик клика по метке\n        markerRef.current.on(\"click\", () => {\n          // Пример реакции: плавно приблизиться к точке\n          if (!mapRef.current) return;\n          mapRef.current.setZoom(15, { animate: true });\n          mapRef.current.setCenter([37.618423, 55.751244], { animate: true });\n        });\n      } catch (e) {\n        // На случай, если load() не прошёл (например, сеть/ключ)\n        console.error(\"MapGL init error:\", e);\n      }\n    })();\n\n    return () => {\n      isMounted = false;\n      try {\n        if (markerRef.current) {\n          markerRef.current.destroy();\n          markerRef.current = null;\n        }\n        if (mapRef.current) {\n          mapRef.current.destroy();\n          mapRef.current = null;\n        }\n      } catch (e) {\n        console.warn(\"Cleanup error:\", e);\n      }\n    };\n  }, []);\n\n  return (\n    <div\n      ref={mapContainerRef}\n      style={{ width: \"100%\", height: 500, borderRadius: 12, overflow: \"hidden\" }}\n    />\n  );\n}"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAChD,SAASC,IAAI,QAAQ,aAAa;;AAElC;AACA;AACA;AACA;AACA;AACA;AALA,SAAAC,MAAA,IAAAC,OAAA;AAMA,eAAe,SAASC,aAAaA,CAAA,EAAG;EAAAC,EAAA;EACtC,MAAMC,eAAe,GAAGN,MAAM,GAACO,cAAc,GAAG,IAAI,GAAE,IAAK;EAC3D,MAAMC,MAAM,GAAGR,MAAM,GAACS,GAAG,GAAE,IAAK;EAChC,MAAMC,SAAS,GAAGV,MAAM,GAACS,GAAG,GAAE,IAAK;EAEnCV,SAAS,CAAC,MAAM;IACd,IAAIY,SAAS,GAAG,IAAI;IAEpB,CAAC,YAAY;MACX,IAAI;QACF,MAAMC,KAAK,GAAG,MAAMX,IAAI,CAAC,CAAC;QAC1B,IAAI,CAACU,SAAS,IAAI,CAACL,eAAe,CAACO,OAAO,EAAE;;QAE5C;QACAL,MAAM,CAACK,OAAO,GAAG,IAAID,KAAK,CAACE,GAAG,CAACR,eAAe,CAACO,OAAO,EAAE;UACtDE,MAAM,EAAE,CAAC,SAAS,EAAE,SAAS,CAAC;UAAE;UAChCC,IAAI,EAAE,EAAE;UACR;UACAC,GAAG,EAAE;QACP,CAAC,CAAC;;QAEF;QACAP,SAAS,CAACG,OAAO,GAAG,IAAID,KAAK,CAACM,MAAM,CAACV,MAAM,CAACK,OAAO,EAAE;UACnDM,WAAW,EAAE,CAAC,SAAS,EAAE,SAAS;UAClC;UACA;UACA;UACA;QACF,CAAC,CAAC;;QAEF;QACAT,SAAS,CAACG,OAAO,CAACO,EAAE,CAAC,OAAO,EAAE,MAAM;UAClC;UACA,IAAI,CAACZ,MAAM,CAACK,OAAO,EAAE;UACrBL,MAAM,CAACK,OAAO,CAACQ,OAAO,CAAC,EAAE,EAAE;YAAEC,OAAO,EAAE;UAAK,CAAC,CAAC;UAC7Cd,MAAM,CAACK,OAAO,CAACU,SAAS,CAAC,CAAC,SAAS,EAAE,SAAS,CAAC,EAAE;YAAED,OAAO,EAAE;UAAK,CAAC,CAAC;QACrE,CAAC,CAAC;MACJ,CAAC,CAAC,OAAOE,CAAC,EAAE;QACV;QACAC,OAAO,CAACC,KAAK,CAAC,mBAAmB,EAAEF,CAAC,CAAC;MACvC;IACF,CAAC,EAAE,CAAC;IAEJ,OAAO,MAAM;MACXb,SAAS,GAAG,KAAK;MACjB,IAAI;QACF,IAAID,SAAS,CAACG,OAAO,EAAE;UACrBH,SAAS,CAACG,OAAO,CAACc,OAAO,CAAC,CAAC;UAC3BjB,SAAS,CAACG,OAAO,GAAG,IAAI;QAC1B;QACA,IAAIL,MAAM,CAACK,OAAO,EAAE;UAClBL,MAAM,CAACK,OAAO,CAACc,OAAO,CAAC,CAAC;UACxBnB,MAAM,CAACK,OAAO,GAAG,IAAI;QACvB;MACF,CAAC,CAAC,OAAOW,CAAC,EAAE;QACVC,OAAO,CAACG,IAAI,CAAC,gBAAgB,EAAEJ,CAAC,CAAC;MACnC;IACF,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,oBACErB,OAAA;IACE0B,GAAG,EAAEvB,eAAgB;IACrBwB,KAAK,EAAE;MAAEC,KAAK,EAAE,MAAM;MAAEC,MAAM,EAAE,GAAG;MAAEC,YAAY,EAAE,EAAE;MAAEC,QAAQ,EAAE;IAAS;EAAE;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC7E,CAAC;AAEN;AAACjC,EAAA,CAlEuBD,aAAa;AAAAmC,EAAA,GAAbnC,aAAa;AAAA,IAAAmC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}